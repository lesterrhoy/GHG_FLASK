
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>csd_dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="{{ url_for('static', filename='css/emucss.css') }}" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

<style>
      /* Common card styling for uniform appearance */
      .custom-card {
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .custom-card h6 {
        font-size: 1.1rem;
        font-weight: bold;
    }

    .custom-card p {
        margin: 5px 0;
        font-size: 0.9rem;
    }
    /* Adjustments for the sidebar */
    .sb-topnav .navbar-nav .nav-item .nav-link {
        display: flex;
        align-items: center;
        padding: 0 8px; /* Reduced padding */
        color: white;
    }

    .sb-topnav .navbar-nav .nav-item .nav-link i {
        margin-right: 4px; /* Reduced space between icon and text */
    }

    /* Main container adjustments */
    .container-fluid.px-4 {
        padding: 1rem 1rem; /* Reduced padding for main container */
    }

    /* Sidebar adjustments for better vertical space */
    .sb-sidenav-menu {
        overflow-y: auto;
        max-height: 90vh;
    }

    #layoutSidenav_nav .sb-sidenav-menu {
        max-height: 90vh;
        overflow-y: auto;
    }

    /* Card styling adjustments */
    .card {
        margin-bottom: 1rem; /* Reduced margin between cards */
        padding: 1rem; /* General padding inside cards */
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2); /* Subtle shadow */
    }

    .card h6 {
        font-size: 1rem;
        margin-bottom: 0.5rem; /* Reduced margin for titles */
    }

    .card p {
        margin-bottom: 0.25rem; /* Reduced space between paragraphs in cards */
        font-size: 0.9rem; /* Slightly smaller font for descriptions */
    }

    /* Emission overview card styling */
    .card.bg-dark {
        padding: 1rem;
        border-radius: 0.25rem;
    }

    /* Adjustments for footer spacing */
    footer.py-4 {
        padding: 1rem 0; /* Reduced padding in the footer */
    }

    /* Responsive layout tweaks */
    @media (min-width: 768px) {
        .col-2.col-md-2.col-sm-6 {
            min-width: 160px; /* Set a consistent minimum width for better alignment */
        }
    }

    /* Adjustments for the filter select box */
    .form-group {
        margin-top: 0.5rem;
        margin-bottom: 1rem; /* Reduced spacing for select box */
    }

    /* Chart container adjustments */
    .chart-container {
        padding: 1rem; /* General padding inside chart containers */
        margin-bottom: 1rem; /* Reduced margin between chart cards */
    }

    /* Landscape print styling */
    @media print {
        @page {
            size: landscape;
        }
    }
</style>

</head>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSD Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar brand -->
        <a class="navbar-brand ps-3" href="{{ url_for('csd_dashboard') }}">CSD Dashboard</a>
    
        <!-- Spacer to push "Sign-out" to the right -->
        <div class="ms-auto"></div>
    
        <!-- Sign-out Icon and Link -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('logout') }}">
                    <i class="fas fa-power-off fa-fw"></i> Sign-out
                </a>
            </li>
        </ul>
    </nav>
    
    <!-- Sidebar and Main Content -->
    <div id="layoutSidenav">
        <!-- Sidebar -->
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu" style="overflow-y: auto; max-height: 90vh;">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">Core</div>
                        <a class="nav-link" href="{{ url_for('csd_dashboard') }}">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Dashboard
                        </a>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages">
                            <div class="sb-nav-link-icon"><i class="fas fa-book-open"></i></div>
                            REPORT
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePages">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="{{ url_for('electricity_report') }}">Electricity Report</a>
                                <a class="nav-link" href="{{ url_for('fuel_emissions_report') }}">Fuel Emissions Report</a>
                                <a class="nav-link" href="{{ url_for('water_report') }}">Water Consumption Report</a>
                                <a class="nav-link" href="{{ url_for('treated_water_report') }}">Treated Water Report</a>
                                <a class="nav-link" href="{{ url_for('waste_segregation_report') }}">Waste Segregation Report</a>
                                <a class="nav-link" href="{{ url_for('waste_unseg_report') }}">Waste Unsegregation Report</a>
                                <a class="nav-link" href="{{ url_for('food_consumption_report') }}">Food Consumption Report</a>
                                <a class="nav-link" href="{{ url_for('lpg_consumption_report') }}">LPG Consumption Report</a>
                                <a class="nav-link" href="{{ url_for('flight_emissions_report') }}">Flight Emissions Report</a>
                                <a class="nav-link" href="{{ url_for('accommodation_emissions_report') }}">Accommodation Emissions Report</a>
                            </nav>
                        </div>
                        <a class="nav-link" href="{{ url_for('manage_account') }}">
                            <div class="sb-nav-link-icon"><i class="fas fa-user-cog"></i></div>
                            Manage Account
                        </a>
                </div>
                </div>
            </nav>
        </div>

        <!-- Main Content Area -->
        <div id="layoutSidenav_content">
            <main class="container-fluid px-4">
                <h1 style="margin-top: 0;">Dashboard</h1>



                <div class="card mb-4">
                    <div class="card-body">
                        <p style="margin-bottom: 0; line-height: 1.5; text-align: justify;">
                            The Center for Sustainable Development Dashboard offers an overview of historical and forecasted consumption and emission trends across all campuses of Batangas State University TNEU. It highlights variability in resource use, showcasing distinct fluctuations in various metrics. This analysis enables a comprehensive understanding of consumption patterns, supporting strategic decisions for improved sustainability.
                        </p>
                    </div>
                </div>
                

                <div class="container mt-3">
                    <!-- Campus Filter Form -->
                    <form method="get" action="{{ url_for('csd_dashboard') }}">
                        <div class="form-group">
                            <label for="campusFilter">Select Campus:</label>
                            <select name="campus" id="campusFilter" class="form-control" onchange="this.form.submit()">
                                <option value="all" {% if selected_campus == 'all' %}selected{% endif %}>All Campuses</option>
                                <option value="Alangilan" {% if selected_campus == 'Alangilan' %}selected{% endif %}>Alangilan</option>
                                <option value="ARASOF-Nasugbu" {% if selected_campus == 'ARASOF-Nasugbu' %}selected{% endif %}>ARASOF-Nasugbu</option>
                                <option value="Balayan" {% if selected_campus == 'Balayan' %}selected{% endif %}>Balayan</option>
                                <option value="Central" {% if selected_campus == 'Central' %}selected{% endif %}>Central</option>
                                <option value="JPLPC-Malvar" {% if selected_campus == 'JPLPC-Malvar' %}selected{% endif %}>JPLPC-Malvar</option>
                                <option value="Lemery" {% if selected_campus == 'Lemery' %}selected{% endif %}>Lemery</option>
                                <option value="Lipa" {% if selected_campus == 'Lipa' %}selected{% endif %}>Lipa</option>
                                <option value="Lobo" {% if selected_campus == 'Lobo' %}selected{% endif %}>Lobo</option>
                                <option value="Mabini" {% if selected_campus == 'Mabini' %}selected{% endif %}>Mabini</option>
                                <option value="Pablo Borbon" {% if selected_campus == 'Pablo Borbon' %}selected{% endif %}>Pablo Borbon</option>
                                <option value="Rosario" {% if selected_campus == 'Rosario' %}selected{% endif %}>Rosario</option>
                                <option value="San Juan" {% if selected_campus == 'San Juan' %}selected{% endif %}>San Juan</option>
                            </select>
                        </div>
                    </form>
                </div>
                

                <div class="container mt-5">
                    <!-- Total Emission Card -->
                    <div class="card bg-dark text-white mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Total Emission</h5>
                            <p>This value represents the cumulative CO₂ emissions from all monitored sources.</p>
                        </div>
                    </div>
                
                    <style>
                        /* Common card styling for uniform appearance */
                        .custom-card {
                            min-height: 150px;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            text-align: center;
                            border-radius: 10px;
                            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                        }
                    
                        .custom-card h6 {
                            font-size: 1.1rem;
                            font-weight: bold;
                        }
                    
                        .custom-card p {
                            margin: 5px 0;
                            font-size: 0.9rem;
                        }
                    </style>
                    
                    <div class="row">
                        <!-- Electricity Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('electricity_report') }}" class="text-decoration-none">
                                <div class="card bg-primary text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Electricity</h6>
                                        <p>Current Emission: </p>
                                        <p>From electricity usage.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    
                        <!-- Fuel Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('fuel_emissions_report') }}" class="text-decoration-none">
                                <div class="card bg-warning text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Fuel</h6>
                                        <p>Current Emission: </p>
                                        <p>From fuel usage.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    
                        <!-- Waste Segregated Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('waste_segregation_report') }}" class="text-decoration-none">
                                <div class="card bg-success text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Waste Segregated</h6>
                                        <p>Current Emission:</p>
                                        <p>From waste segregation.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    
                        <!-- Waste Unsegregated Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('waste_unseg_report') }}" class="text-decoration-none">
                                <div class="card bg-danger text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Waste Unsegregated</h6>
                                        <p>Current Emission: </p>
                                        <p>From unsegregated waste.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    
                        <!-- Treated Water Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('treated_water_report') }}" class="text-decoration-none">
                                <div class="card bg-info text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Treated Water</h6>
                                        <p>Current Emission: </p>
                                        <p>From treated water usage.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="row">
                        <!-- Water Consumption Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('water_report') }}" class="text-decoration-none">
                                <div class="card bg-secondary text-white mb-4 custom-card">
                                    <div class="card-body">
                                        <h6 class="card-title">Water Consumption</h6>
                                        <p>Current Emission: </p>
                                        <p>From water usage.</p>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('lpg_consumption_report') }}" class="text-decoration-none">
                                <div class="card bg-dark text-white mb-4" style="min-height: 150px;">
                                    <div class="card-body">
                                        <h6 class="card-title">LPG</h6>
                                        <p>Current Emission: CO₂e</p>
                                        <p>From LPG usage.</p>
                                 </div>
                                </div>
                                </a>
                        </div>
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('food_consumption_report') }}" class="text-decoration-none">
                            <div class="card bg-light text-dark mb-4" style="min-height: 150px;">
                                <div class="card-body">
                                    <h6 class="card-title">Food Waste</h6>
                                    <p>Current Emission: CO₂e</p>
                                    <p>From food usage.</p>
                                </div>
                            </div>
                            </a>
                        </div>
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('accommodation_emissions_report') }}" class="text-decoration-none">
                            <div class="card bg-primary text-white mb-4" style="min-height: 150px;">
                                <div class="card-body">
                                    <h6 class="card-title">Accommodation</h6>
                                    <p>Current Emission: CO₂e</p>
                                    <p>From accommodation usage.</p>
                                </div>
                            </div>
                            </a>
                        </div>
                
                        <!-- Flight Card -->
                        <div class="col-2 col-md-2 col-sm-6">
                            <a href="{{ url_for('flight_emissions_report') }}" class="text-decoration-none">
                            <div class="card bg-warning text-white mb-4" style="min-height: 150px;">
                                <div class="card-body">
                                    <h6 class="card-title">Flight</h6>
                                    <p>Current Emission: CO₂e</p>
                                    <p>From flight usage.</p>
                                </div>
                            </div>
                            </a>
                        </div>
                    </div>
                
                    <div class="row">
                        <!-- Electricity Consumption (Expanded to full width) -->
                        <div class="col-xl-12"> <!-- Full-width container for electricity chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-bolt"></i> Electricity Consumption
                                    <select id="electricityYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('electricity')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="electricityForecastChart" width="800" height="400"></canvas> <!-- Adjusted width and height for a larger chart -->
                            </div>
                        </div>
                    
                        <!-- Fuel Consumption (Expanded to full width) -->
                        <div class="col-xl-12"> <!-- Full-width container for fuel chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-gas-pump"></i> Fuel Consumption
                                    <select id="fuelYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('fuel')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="fuelForecastChart" width="800" height="400"></canvas> <!-- Adjusted width and height for a larger chart -->
                            </div>
                        </div>
                    
                        <!-- Water Consumption (Expanded to full width) -->
                        <div class="col-xl-12"> <!-- Full-width container for water chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-water"></i> Water Consumption
                                    <select id="waterYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('water')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="waterForecastChart" width="800" height="400"></canvas> <!-- Adjusted width and height for a larger chart -->
                            </div>
                        </div>
                    
                        <!-- Treated Water Consumption (Expanded to full width) -->
                        <div class="col-xl-12"> <!-- Full-width container for treated water chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-recycle"></i> Treated Water Consumption
                                    <select id="treatedWaterYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('treated_water')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="treatedWaterForecastChart" width="800" height="400"></canvas> <!-- Adjusted width and height for a larger chart -->
                            </div>
                        </div>
                        <div class="col-xl-12"> <!-- Full-width container for LPG chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-burn"></i> LPG Consumption
                                    <select id="lpgYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('lpg')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="lpgForecastChart" width="800" height="400"></canvas> <!-- Adjusted width and height for a larger chart -->
                            </div>
                        </div>
                        <div class="col-xl-12"> <!-- Full-width container for Food Waste chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-utensils"></i> Food Waste Emissions
                                    <select id="foodYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('food')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="foodWasteForecastChart" width="800" height="400"></canvas>
                            </div>
                        </div>
                        <div class="col-xl-12"> <!-- Full-width container for Solid Waste Unsegregated chart -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-trash-alt"></i> Solid Waste Unsegregated Emissions
                                    <select id="solidWasteYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('solid_waste_unsegregated')">
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <canvas id="solidWasteUnsegregatedForecastChart" width="800" height="400"></canvas> <!-- Solid Waste Unsegregated chart -->
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-12"> <!-- Full-width container for Solid Waste Segregated chart -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-trash-alt"></i> Solid Waste Segregated Emissions
                                <select id="solidWasteSegregatedYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('solid_waste_segregated')">
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                </select>
                            </div>
                            <canvas id="solidWasteSegregatedChart" width="800" height="400"></canvas>
                        </div>
                    </div>
                    <div class="col-xl-12">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-bed"></i> Accommodation Emissions
                                <select id="accommodationYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('accommodation')">
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                </select>
                            </div>
                            <canvas id="accommodationChart" width="800" height="400"></canvas>
                        </div>
                    </div>
                    <div class="col-xl-12">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-plane"></i> Flight Emissions
                                <select id="flightYearSelect" class="form-select form-select-sm" style="width: auto; display: inline;" onchange="updateChart('flight')">
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                </select>
                            </div>
                            <canvas id="flightChart" width="800" height="400"></canvas>
                        </div>
                    </div>
                        </div>
                        
                    </div>
                    
                    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
                    <script>
                        // Establish socket connection
                        var socket = io();
                    
                        // Data for Electricity Consumption Forecast (initial load)
                        const electricityMonths = {{ electricity_months | tojson }};
                        const electricityForecastMonths = {{ electricity_forecast_months | tojson }};
                        const actualElectricityValues = {{ actual_electricity_values | tojson }};
                        const electricityForecastedValues = {{ electricity_forecasted_values | tojson }};
                        const allElectricityMonths = electricityMonths.concat(electricityForecastMonths);
                    
                        // Create the initial chart for Electricity
                        const ctxElectricity = document.getElementById('electricityForecastChart').getContext('2d');
                        const electricityChart = new Chart(ctxElectricity, {
                            type: 'line',
                            data: {
                                labels: allElectricityMonths,
                                datasets: [
                                    {
                                        label: 'Electricity Consumption (Actual)',
                                        data: actualElectricityValues,
                                        borderColor: 'blue',
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    },
                                    {
                                        label: 'Electricity Consumption (Forecast)',
                                        data: Array(actualElectricityValues.length).fill(null).concat(electricityForecastedValues),
                                        borderColor: 'red',
                                        borderDash: [5, 5],
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Month'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'kg CO2 per kWh'
                                        }
                                    }
                                }
                            }
                        });
                    
                        // Data for Fuel Consumption Forecast (initial load)
                        const fuelMonths = {{ fuel_months | tojson }};
                        const fuelForecastMonths = {{ fuel_forecast_months | tojson }};
                        const actualFuelValues = {{ actual_fuel_values | tojson }};
                        const fuelForecastedValues = {{ fuel_forecasted_values | tojson }};
                        const allFuelMonths = fuelMonths.concat(fuelForecastMonths);
                    
                        // Create the initial chart for Fuel
                        const ctxFuel = document.getElementById('fuelForecastChart').getContext('2d');
                        const fuelChart = new Chart(ctxFuel, {
                            type: 'line',
                            data: {
                                labels: allFuelMonths,
                                datasets: [
                                    {
                                        label: 'Fuel Consumption (Actual)',
                                        data: actualFuelValues,
                                        borderColor: 'green',
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    },
                                    {
                                        label: 'Fuel Consumption (Forecast)',
                                        data: Array(actualFuelValues.length).fill(null).concat(fuelForecastedValues),
                                        borderColor: 'orange',
                                        borderDash: [5, 5],
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Month'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Total Emission (kg)'
                                        }
                                    }
                                }
                            }
                        });
                    
                        // Data for Water Consumption Forecast (initial load)
                        const waterMonths = {{ water_months | tojson }};
                        const waterForecastMonths = {{ water_forecast_months | tojson }};
                        const actualWaterValues = {{ actual_water_values | tojson }};
                        const waterForecastedValues = {{ water_forecasted_values | tojson }};
                        const allWaterMonths = waterMonths.concat(waterForecastMonths);
                    
                        // Create the initial chart for Water
                        const ctxWater = document.getElementById('waterForecastChart').getContext('2d');
                        const waterChart = new Chart(ctxWater, {
                            type: 'line',
                            data: {
                                labels: allWaterMonths,
                                datasets: [
                                    {
                                        label: 'Water Consumption (Actual)',
                                        data: actualWaterValues,
                                        borderColor: 'purple',
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    },
                                    {
                                        label: 'Water Consumption (Forecast)',
                                        data: Array(actualWaterValues.length).fill(null).concat(waterForecastedValues),
                                        borderColor: 'cyan',
                                        borderDash: [5, 5],
                                        fill: false,
                                        pointRadius: 4,
                                        borderWidth: 2
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Month'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'kg CO2 per factor'
                                        }
                                    }
                                }
                            }
                        });
                    
                        // Data for Treated Water Consumption Forecast (initial load)
const treatedWaterMonths = {{ treated_water_months | tojson }};
const treatedWaterForecastMonths = {{ treated_water_forecast_months | tojson }};
const actualTreatedWaterValues = {{ actual_treated_water_values | tojson }};
const treatedWaterForecastedValues = {{ treated_water_forecasted_values | tojson }};
const allTreatedWaterMonths = treatedWaterMonths.concat(treatedWaterForecastMonths);

// Create the initial chart for Treated Water
const ctxTreatedWater = document.getElementById('treatedWaterForecastChart').getContext('2d');
const treatedWaterChart = new Chart(ctxTreatedWater, {
    type: 'line',
    data: {
        labels: allTreatedWaterMonths,
        datasets: [
            {
                label: 'Treated Water Consumption (Actual)',
                data: actualTreatedWaterValues,
                borderColor: 'teal',
                fill: false,
                pointRadius: 4,
                borderWidth: 2
            },
            {
                label: 'Treated Water Consumption (Forecast)',
                data: Array(actualTreatedWaterValues.length).fill(null).concat(treatedWaterForecastedValues),
                borderColor: 'pink',
                borderDash: [5, 5],
                fill: false,
                pointRadius: 4,
                borderWidth: 2
            }
        ]
    },
    options: {
        responsive: true,
        scales: {
            x: {
                title: {
                    display: true,
                    text: 'Month'
                }
            },
            y: {
                title: {
                    display: true,
                    text: 'kg CO2 per treated water unit'
                }
            }
        }
    }
});

// Listen for real-time updates from the server for Treated Water
socket.on('update_treated_water_data', function(data) {
    console.log('Received new treated water data:', data);

    // Update treated water chart labels and data
    treatedWaterChart.data.labels = data.months.concat(data.forecast_months);
    treatedWaterChart.data.datasets[0].data = data.actual_values;
    treatedWaterChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);

    // Update the chart to reflect the new data
    treatedWaterChart.update();
});

// Function to update the chart based on selected year for Treated Water
function updateTreatedWaterChart() {
    const selectedYear = document.getElementById('treatedWaterYearSelect').value;

    // Emit an event to request new data for the selected year
    socket.emit('request_yearly_data', { year: selectedYear, type: 'treated_water' });

    // Listen for the response with updated data
    socket.on('update_treated_water_data', function(data) {
        console.log(`Received updated treated water data for year ${selectedYear}:`, data);

        // Update the chart data
        treatedWaterChart.data.labels = data.months.concat(data.forecast_months);
        treatedWaterChart.data.datasets[0].data = data.actual_values;
        treatedWaterChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
        treatedWaterChart.update();
    });
}

                         // Data for LPG Consumption Forecast (initial load)
    const lpgMonths = {{ lpg_months | tojson }};
    const lpgForecastMonths = {{ lpg_forecast_months | tojson }};
    const actualLpgValues = {{ actual_lpg_values | tojson }};
    const lpgForecastedValues = {{ lpg_forecasted_values | tojson }};
    const allLpgMonths = lpgMonths.concat(lpgForecastMonths);

    // Create the initial chart for LPG
    const ctxLpg = document.getElementById('lpgForecastChart').getContext('2d');
    const lpgChart = new Chart(ctxLpg, {
        type: 'line',
        data: {
            labels: allLpgMonths,
            datasets: [
                {
                    label: 'LPG Consumption (Actual)',
                    data: actualLpgValues,
                    borderColor: 'brown',
                    fill: false,
                    pointRadius: 4,
                    borderWidth: 2
                },
                {
                    label: 'LPG Consumption (Forecast)',
                    data: Array(actualLpgValues.length).fill(null).concat(lpgForecastedValues),
                    borderColor: 'gold',
                    borderDash: [5, 5],
                    fill: false,
                    pointRadius: 4,
                    borderWidth: 2
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Month'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'GHG Emission (kg CO2e)'
                    }
                }
            }
        }
    });

    // Listen for real-time updates from the server
    socket.on('update_lpg_data', function(data) {
        console.log('Received new LPG data:', data);

        // Update LPG chart labels and data
        lpgChart.data.labels = data.months.concat(data.forecast_months);
        lpgChart.data.datasets[0].data = data.actual_values;
        lpgChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);

        // Update the chart to reflect the new data
        lpgChart.update();
    });

    // Function to update the chart based on selected year
    function updateChart(type) {
        const selectedYear = document.getElementById(`${type}YearSelect`).value;

        // Emit an event to request new data for the selected year
        socket.emit('request_yearly_data', { year: selectedYear, type: type });

        // Listen for the response with updated data
        socket.on(`update_${type}_data`, function(data) {
            console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

            // Update the chart data
            if (type === 'lpg') {
                lpgChart.data.labels = data.months.concat(data.forecast_months);
                lpgChart.data.datasets[0].data = data.actual_values;
                lpgChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                lpgChart.update();
            }
        });
    }
    // Data for Food Waste Emissions Forecast (initial load)
    const foodMonths = {{ food_waste_months | tojson }};
    const foodForecastMonths = {{ food_waste_forecast_months | tojson }};
    const actualFoodValues = {{ actual_food_waste_values | tojson }};
    const foodForecastedValues = {{ food_waste_forecasted_values | tojson }};
    const allFoodMonths = foodMonths.concat(foodForecastMonths);

    // Check if food chart data is not empty
    if (allFoodMonths.length > 0 && actualFoodValues.length > 0) {
        // Create the initial chart for Food Waste Emissions
        const ctxFood = document.getElementById('foodWasteForecastChart').getContext('2d');
        const foodChart = new Chart(ctxFood, {
            type: 'line',
            data: {
                labels: allFoodMonths,
                datasets: [
                    {
                        label: 'Food Waste Emissions (Actual)',
                        data: actualFoodValues,
                        borderColor: 'green',
                        fill: false,
                        pointRadius: 4,
                        borderWidth: 2
                    },
                    {
                        label: 'Food Waste Emissions (Forecast)',
                        data: Array(actualFoodValues.length).fill(null).concat(foodForecastedValues),
                        borderColor: 'orange',
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 4,
                        borderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'GHG Emission (kg CO2e)'
                        }
                    }
                }
            }
        });

        // Listen for real-time updates from the server for Food Waste
        socket.on('update_food_data', function(data) {
            console.log('Received new food waste data:', data);

            // Update food chart labels and data
            foodChart.data.labels = data.months.concat(data.forecast_months);
            foodChart.data.datasets[0].data = data.actual_values;
            foodChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);

            // Update the chart to reflect the new data
            foodChart.update();
        });

        // Function to update the chart based on selected year
        function updateChart(type) {
            const selectedYear = document.getElementById(`${type}YearSelect`).value;

            // Emit an event to request new data for the selected year
            socket.emit('request_yearly_data', { year: selectedYear, type: type });

            // Listen for the response with updated data only once to avoid multiple event triggers
            socket.once(`update_${type}_data`, function(data) {
                console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

                if (type === 'food') {
                    // Update the food chart data
                    foodChart.data.labels = data.months.concat(data.forecast_months);
                    foodChart.data.datasets[0].data = data.actual_values;
                    foodChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                    foodChart.update();
                }
            });
        }
    } else {
        console.log('Error: Food chart data is missing or empty.');
    }
     // Data for Solid Waste Unsegregated Emissions Forecast (initial load)
    const solidWasteMonths = {{ solid_waste_unsegregated_months | tojson if solid_waste_unsegregated_months else '[]' }};
    const solidWasteForecastMonths = {{ solid_waste_unsegregated_forecast_months | tojson if solid_waste_unsegregated_forecast_months else '[]' }};
    const actualSolidWasteValues = {{ actual_solid_waste_unsegregated_values | tojson if actual_solid_waste_unsegregated_values else '[]' }};
    const solidWasteForecastedValues = {{ solid_waste_unsegregated_forecasted_values | tojson if solid_waste_unsegregated_forecasted_values else '[]' }};

    console.log("Solid Waste Months:", solidWasteMonths);
    console.log("Solid Waste Forecast Months:", solidWasteForecastMonths);
    console.log("Actual Solid Waste Values:", actualSolidWasteValues);
    console.log("Solid Waste Forecasted Values:", solidWasteForecastedValues);

    const allSolidWasteMonths = solidWasteMonths.concat(solidWasteForecastMonths);

    // Ensure data exists before proceeding with the chart creation
    if (actualSolidWasteValues.length > 0 && solidWasteForecastedValues.length > 0) {
        // Create the initial chart for Solid Waste Unsegregated Emissions
        const ctxSolidWaste = document.getElementById('solidWasteUnsegregatedForecastChart').getContext('2d');
        const solidWasteChart = new Chart(ctxSolidWaste, {
            type: 'line',
            data: {
                labels: allSolidWasteMonths,
                datasets: [
                    {
                        label: 'Solid Waste Unsegregated Emissions (Actual)',
                        data: actualSolidWasteValues,
                        borderColor: 'brown',
                        fill: false,
                        pointRadius: 4,
                        borderWidth: 2
                    },
                    {
                        label: 'Solid Waste Unsegregated Emissions (Forecast)',
                        data: Array(actualSolidWasteValues.length).fill(null).concat(solidWasteForecastedValues),
                        borderColor: 'purple',
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 4,
                        borderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'GHG Emission (kg CO2e)'
                        }
                    }
                }
            }
        });
    } else {
        console.log('Error: Missing or empty data for Solid Waste Unsegregated chart.');
    }

    const segregatedWasteMonths = {{ segregated_waste_months | tojson if segregated_waste_months else '[]' }};
const segregatedWasteForecastMonths = {{ segregated_waste_forecast_months | tojson if segregated_waste_forecast_months else '[]' }};
const actualSegregatedWasteValues = {{ actual_segregated_waste_values | tojson if actual_segregated_waste_values else '[]' }};
const segregatedWasteForecastedValues = {{ segregated_waste_forecasted_values | tojson if segregated_waste_forecasted_values else '[]' }};

    // Listen for real-time updates from the server for Solid Waste Unsegregated
    socket.on('update_solid_waste_unsegregated_data', function(data) {
        console.log('Received new solid waste unsegregated data:', data);

        // Ensure the data is in the correct format
        if (data && data.months && data.forecast_months && data.actual_values && data.forecasted_values) {
            // Update solid waste chart labels and data
            solidWasteChart.data.labels = data.months.concat(data.forecast_months);
            solidWasteChart.data.datasets[0].data = data.actual_values;
            solidWasteChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);

            // Update the chart to reflect the new data
            solidWasteChart.update();
        } else {
            console.log('Error: Data format for solid waste unsegregated is incorrect.');
        }
    });

    // Function to update the chart based on selected year
    function updateChart(type) {
        const selectedYear = document.getElementById(`${type}YearSelect`).value;

        // Emit an event to request new data for the selected year
        socket.emit('request_yearly_data', { year: selectedYear, type: type });

        // Listen for the response with updated data only once to avoid multiple event triggers
        socket.once(`update_${type}_data`, function(data) {
            console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

            if (type === 'solid_waste_unsegregated') {
                // Ensure data is available before updating the chart
                if (data && data.months && data.forecast_months && data.actual_values && data.forecasted_values) {
                    solidWasteChart.data.labels = data.months.concat(data.forecast_months);
                    solidWasteChart.data.datasets[0].data = data.actual_values;
                    solidWasteChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                    solidWasteChart.update();
                } else {
                    console.log('Error: Missing data for updating Solid Waste Unsegregated chart.');
                }
            }
        });
    }

    // Initialize Solid Waste Segregated Chart with data passed from Flask (app.py)
    const solidWasteSegregatedMonths = {{ solid_waste_segregated_months | tojson if solid_waste_segregated_months else '[]' }};
    const solidWasteSegregatedForecastMonths = {{ solid_waste_segregated_forecast_months | tojson if solid_waste_segregated_forecast_months else '[]' }};
    const actualSolidWasteSegregatedValues = {{ actual_solid_waste_segregated_values | tojson if actual_solid_waste_segregated_values else '[]' }};
    const solidWasteSegregatedForecastedValues = {{ solid_waste_segregated_forecasted_values | tojson if solid_waste_segregated_forecasted_values else '[]' }};

    const ctx = document.getElementById('solidWasteSegregatedChart').getContext('2d');
    let solidWasteSegregatedChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: solidWasteSegregatedMonths.concat(solidWasteSegregatedForecastMonths),
            datasets: [
                {
                    label: 'Actual',
                    data: actualSolidWasteSegregatedValues,
                    borderColor: 'blue',
                    fill: false,
                    tension: 0.4
                },
                {
                    label: 'Forecast',
                    data: Array(actualSolidWasteSegregatedValues.length).fill(null).concat(solidWasteSegregatedForecastedValues),
                    borderColor: 'red',
                    borderDash: [5, 5],
                    fill: false,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Months'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'KG CO2e'
                    }
                }
            }
        }
    });

    // Listen for real-time updates from the server for Solid Waste Segregated
    socket.on('update_solid_waste_segregated_data', function(data) {
        console.log('Received new solid waste segregated data:', data);

        // Ensure the data is in the correct format
        if (data && data.months && data.forecast_months && data.actual_values && data.forecasted_values) {
            // Update solid waste segregated chart labels and data
            solidWasteSegregatedChart.data.labels = data.months.concat(data.forecast_months);
            solidWasteSegregatedChart.data.datasets[0].data = data.actual_values;
            solidWasteSegregatedChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);

            // Update the chart to reflect the new data
            solidWasteSegregatedChart.update();
        } else {
            console.log('Error: Data format for solid waste segregated is incorrect.');
        }
    });

    // Function to update the chart based on selected year
    function updateChart(type) {
        const selectedYear = document.getElementById(`${type}YearSelect`).value;

        // Emit an event to request new data for the selected year
        socket.emit('request_yearly_data', { year: selectedYear, type: type });

        // Listen for the response with updated data only once to avoid multiple event triggers
        socket.once(`update_${type}_data`, function(data) {
            console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

            if (type === 'solid_waste_segregated') {
                // Ensure data is available before updating the chart
                if (data && data.months && data.forecast_months && data.actual_values && data.forecasted_values) {
                    solidWasteSegregatedChart.data.labels = data.months.concat(data.forecast_months);
                    solidWasteSegregatedChart.data.datasets[0].data = data.actual_values;
                    solidWasteSegregatedChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                    solidWasteSegregatedChart.update();
                } else {
                    console.log('Error: Missing data for updating Solid Waste Segregated chart.');
                }
            }
        });
    }

    // Initialize the chart with the default year on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateChart('solid_waste_segregated');
    });
// Initialize Accommodation Chart
const accommodationCtx = document.getElementById('accommodationChart').getContext('2d');
    let accommodationChart = new Chart(accommodationCtx, {
        type: 'line',
        data: {
            labels: {{ accommodation_years | tojson if accommodation_years else '[]' }}.concat(
                {{ accommodation_forecast_years | tojson if accommodation_forecast_years else '[]' }}
            ),
            datasets: [
                {
                    label: 'Actual',
                    data: {{ actual_accommodation_values | tojson if actual_accommodation_values else '[]' }},
                    borderColor: 'blue',
                    fill: false,
                    tension: 0.4
                },
                {
                    label: 'Forecast',
                    data: Array(
                        {{ actual_accommodation_values | tojson if actual_accommodation_values else '[]' }}.length
                    ).fill(null).concat(
                        {{ accommodation_forecasted_values | tojson if accommodation_forecasted_values else '[]' }}
                    ),
                    borderColor: 'red',
                    borderDash: [5, 5],
                    fill: false,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Years'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'KG CO2e'
                    }
                }
            }
        }
    });

    // Real-time update for Accommodation
    socket.on('update_accommodation_data', function(data) {
        console.log('Received new accommodation data:', data);

        if (data && data.years && data.forecast_years && data.actual_values && data.forecasted_values) {
            accommodationChart.data.labels = data.years.concat(data.forecast_years);
            accommodationChart.data.datasets[0].data = data.actual_values;
            accommodationChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
            accommodationChart.update();
        } else {
            console.error('Error: Data format for accommodation is incorrect.');
        }
    });

    // Function to update the Accommodation chart based on the selected year
    function updateChart(type) {
        const selectedYear = document.getElementById(`${type}YearSelect`).value;

        socket.emit('request_yearly_data', { year: selectedYear, type: type });

        socket.once(`update_${type}_data`, function(data) {
            console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

            if (type === 'accommodation' && data && data.years && data.forecast_years) {
                accommodationChart.data.labels = data.years.concat(data.forecast_years);
                accommodationChart.data.datasets[0].data = data.actual_values;
                accommodationChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                accommodationChart.update();
            } else {
                console.error(`Error: Missing or invalid data for updating ${type} chart.`);
            }
        });
    }

    // Initialize the Accommodation chart with the default year
    document.addEventListener('DOMContentLoaded', function() {
        updateChart('accommodation');
    });
    // Initialize Flight Chart
    const flightCtx = document.getElementById('flightChart').getContext('2d');
    let flightChart = new Chart(flightCtx, {
        type: 'line',
        data: {
            labels: {{ flight_years | tojson if flight_years else '[]' }}.concat(
                {{ flight_forecast_years | tojson if flight_forecast_years else '[]' }}
            ),
            datasets: [
                {
                    label: 'Actual',
                    data: {{ actual_flight_values | tojson if actual_flight_values else '[]' }},
                    borderColor: 'blue',
                    fill: false,
                    tension: 0.4
                },
                {
                    label: 'Forecast',
                    data: Array(
                        {{ actual_flight_values | tojson if actual_flight_values else '[]' }}.length
                    ).fill(null).concat(
                        {{ flight_forecasted_values | tojson if flight_forecasted_values else '[]' }}
                    ),
                    borderColor: 'red',
                    borderDash: [5, 5],
                    fill: false,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Years'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'KG CO2e'
                    }
                }
            }
        }
    });

    // Real-time update for Flight
    socket.on('update_flight_data', function(data) {
        console.log('Received new flight data:', data);

        if (data && data.years && data.forecast_years && data.actual_values && data.forecasted_values) {
            flightChart.data.labels = data.years.concat(data.forecast_years);
            flightChart.data.datasets[0].data = data.actual_values;
            flightChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
            flightChart.update();
        } else {
            console.error('Error: Data format for flight is incorrect.');
        }
    });

    // Function to update the Flight chart based on the selected year
    function updateChart(type) {
        const selectedYear = document.getElementById(`${type}YearSelect`).value;

        socket.emit('request_yearly_data', { year: selectedYear, type: type });

        socket.once(`update_${type}_data`, function(data) {
            console.log(`Received updated ${type} data for year ${selectedYear}:`, data);

            if (type === 'flight' && data && data.years && data.forecast_years) {
                flightChart.data.labels = data.years.concat(data.forecast_years);
                flightChart.data.datasets[0].data = data.actual_values;
                flightChart.data.datasets[1].data = Array(data.actual_values.length).fill(null).concat(data.forecasted_values);
                flightChart.update();
            } else {
                console.error(`Error: Missing or invalid data for updating ${type} chart.`);
            }
        });
    }

    // Initialize the Flight chart with the default year
    document.addEventListener('DOMContentLoaded', function() {
        updateChart('flight');
    });
    </script>
</body>
</html>