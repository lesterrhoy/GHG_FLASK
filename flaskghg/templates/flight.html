<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Flight Data" />
    <meta name="author" content="Your Name" />
    <title>Flight Data</title>
    <link href="{{ url_for('static', filename='css/emucss.css') }}" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<style>
    .container {
        display: flex;
        justify-content: space-between;
        padding: 20px;
    }

    .form-container {
        width: 45%;
    }

    .result-container {
        width: 45%;
        padding: 20px;
        border: 1px solid #ccc;
    }

    button {
        margin-top: 10px;
    }
     table {
            width: 100%; /* Full width for table */
            border-collapse: collapse; /* Collapse borders */
            font-size: 10px; /* Smaller table font */
        }

        th, td {
            padding: 4px; /* Smaller cell padding */
            text-align: center; /* Center align text */
            border: 1px solid #ddd; /* Add border */
        }

        th {
            background-color: #d50000; /* Red background for table headers */
            color: white; /* White text for better contrast */
            font-size: 11px; /* Reduce font size for headers to prevent overflow */
        }
        #yearFilter, #quarterFilter, #monthFilter {
        margin: 10px 0; /* Adds top and bottom margin */
         }

        body {
            font-family: 'Roboto', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

           .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #e0e0e0;
    padding: 10px 20px; /* Adjust padding */
    border-bottom: 2px solid #ccc;
    z-index: 1;
    position: relative;
}

.header .logo {
    width: 50px; /* Adjust width of the logo */
    height: auto;
    margin-left: 5px;
    transition: margin-left 0.5s ease;
}

        .header .title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            text-align: center;
            flex-grow: 1;
        }

        .content {
            flex-grow: 1;
            background-color: #d50000;
            padding: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: margin-left 0.5s ease;
        }

        .filter-container {
            margin-bottom: 20px;
        }

        .filter-container select {
            padding: 10px;
            font-size: 16px;
        }

        #reportTable {
            width: 100%;
            border-collapse: collapse;
        }

        #reportTable th, #reportTable td {
            padding: 10px;
            border: 1px solid #000;
        }

        
            .modal {
    display: none; /* Flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: flex-start; /* Align content at the top */
    position: fixed; /* Stay in place */
    z-index: 2; /* Sit above everything */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0, 0, 0, 0.5); /* Black background with opacity */
    padding-top: 50px; /* Adjust padding to move content lower */
}

.modal-content {
    background-color: #fefefe;
    margin: 2% auto; /* Center it vertically and horizontally */
    padding: 20px;
    border: 1px solid #888;
    width: 50%; /* Could be adjusted based on design */
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

.modal .container {
    background-color: #d50000;
    padding: 15px; /* Slightly reduced padding */
    width: 100%; /* Full width within modal */
    height: auto; /* Adjust based on content */
    border-radius: 10px;
    color: #fff;
    display: flex;
    justify-content: space-between; /* Align form and result container side by side */
    box-sizing: border-box;
}

.form-container,
.result-container {
    width: 48%; /* Make both form and result container take equal space */
    margin: 0; /* Remove extra margins */
}

.form-container form {
    display: flex;
    flex-direction: column;
    gap: 2.5px; /* Reduced gap between form elements */
}

.form-container form label {
    font-size: 14px; /* Smaller font size for labels */
    margin-bottom: 5px; /* Minimal space between label and input */
}

.form-container form input,
.form-container form select {
    padding: 8px; /* Reduced padding inside input fields */
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
    color: #333;
    font-size: 14px; /* Smaller font size for inputs */
}

.form-container form button {
    padding: 10px; /* Smaller button padding */
    background-color: #666;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px; /* Smaller font size for buttons */
}

.form-container form button:hover {
    background-color: #555;
}

.result-container {
    background-color: #e0e0e0;
    padding: 15px; /* Smaller padding for result container */
    border-radius: 10px;
}

#result {
    background-color: #fff;
    color: #333;
    padding: 15px; /* Reduced padding */
    border-radius: 10px;
    margin-top: 15px;
}

canvas {
    margin-top: 20px;
    display: block;
    width: 100%;
}

.buttons-container {
    display: flex;
    justify-content: center;
    gap: 10px; /* Reduced gap between buttons */
    margin-top: 20px;
}

button {
    padding: 10px 15px; /* Reduced button padding */
    font-size: 14px; /* Smaller button font size */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-left: 10px; /* Adds space to move the button to the right */
}

button:first-child {
    background-color: #666;
    color: white;
}

button:first-child:hover {
    background-color: #555;
}

button:last-child {
    background-color: #d50000;
    color: white;
}

button:last-child:hover {
    background-color: #b71c1c;
}

        .pagination {
            margin-top: 10px; /* Adjust spacing */
            text-align: center;
        }

        .pagination button {
            padding: 5px 8px; /* Smaller button size */
            margin: 2px; /* Adjust margin */
            font-size: 12px; /* Smaller font size */
            cursor: pointer;
        }

        .pagination .page-info {
            margin: 0 10px;
            font-size: 14px;
        }

        .delete-icon {
            cursor: pointer;
            color: #fd0808;
        }
        @media screen and (max-width: 768px) {
    table {
        font-size: 10px; /* Adjusted font size for smaller screens */
    }

    th, td {
        padding: 6px; /* Adjusted padding for smaller screens */
    }

    .modal-content {
        width: 90%; /* Modal width adjusts to smaller screens */
    }

    .form-container,
    .result-container {
        width: 40%; /* Adjust width as needed */
    margin-left: auto; /* Pushes the container to the right */
    padding: 20px; /* Add some padding */
    background-color: #f1f1f1; /* Optional: Background color for the container */
    border-radius: 8px; /* Optional: Rounded corners */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Shadow effect */
    
}

    .container {
        padding: 10px; /* Adjust padding for smaller screens */
    }
}
</style>
<body class="sb-nav-fixed">
    <!-- Navbar -->
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <a class="navbar-brand ps-3" href="{{ url_for('external_dashboard') }}">EXTERNAL <span style="text-transform: uppercase; font-style: italic;">{{ session['campus'] }}</span></a>
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle"><i class="fas fa-bars"></i></button>
        <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
            <div class="input-group">
                <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
            </div>
        </form>
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="#">Activity Log</a></li>
                    <li><hr class="dropdown-divider" /></li>
                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <!-- Sidebar & Layout -->
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">Core</div>
                        <a class="nav-link" href="{{ url_for('external_dashboard') }}">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Dashboard
                        </a>
                        <div class="sb-sidenav-menu-heading">Consumption</div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseProcurement" aria-expanded="false" aria-controls="collapseProcurement">
                            <div class="sb-nav-link-icon"><i class="fas fa-plane"></i></div>
                            Flight 
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>

                            </nav>
                        </div>
                    </div>
                </div>
            </nav>
        </div>

        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <div id="FlightHeader">
                        <h1 class="mt-4">Flight</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="{{ url_for('external_dashboard') }}">Dashboard</a></li>
                        </ol>
                    </div>

                    <div class="card mb-4">
                        <div class="card-body">
                            Flight data emissions contribute significantly to the overall carbon footprint through fuel consumption.
                        </div>
                    </div>

                    <!-- Modal Trigger -->
                    <div class="mb-4">
                        <button id="openModalBtn" class="btn btn-primary" style="background-color:#0076CE; color: white; border: none;" onclick="openCalculatorModal()">Add Flight Data</button>
                    </div>

                    <!-- Data Table -->
                    <table id="reportTable" class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Campus</th>
                                <th>Office</th>
                                <th>Year</th>
                                <th>Traveller</th>
                                <th>Purpose</th>
                                <th>Travel Date</th>
                                <th>Origin</th>
                                <th>Destination</th>
                                <th>Class</th>
                                <th>One Way/Round Trip</th>
                                <th>kg CO2e</th>
                                <th>t CO2e</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reportData">
                            {% for flight in flight_data %}
                            <tr>
                                <td>{{ flight.Campus }}</td>
                                <td>{{ flight.Office }}</td>
                                <td>{{ flight.Year }}</td>
                                <td>{{ flight.TravellerName }}</td>
                                <td>{{ flight.TravelPurpose }}</td>
                                <td>{{ flight.TravelDate }}</td>
                                <td>{{ flight.Origin }}</td>
                                <td>{{ flight.Destination }}</td>
                                <td>{{ flight.Class }}</td>
                                <td>{{ flight.Oneway_RoundTrip}}</td>
                                <td>{{ flight.GHGEmissionKGC02e }}</td>
                                <td>{{ flight.GHGEmissionTC02e }}</td>
                                <td>
                                    <span class="delete-icon" onclick="deleteRow({{ flight.id }})">
                                        <i class="fa-solid fa-trash-can" style="color: #fd0808;"></i>
                                    </span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        
                    </table>

                    <!-- Pagination -->
                    <div class="pagination">
                        <button onclick="prevPage()" id="prevBtn" disabled>Previous</button>
                        <span class="page-info" id="page-info">Page 1 of 1</span>
                        <button onclick="nextPage()" id="nextBtn">Next</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="modal" id="myModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="form-container">
                <form id="flightForm" method="POST">
                    <label for="campus">Campus:</label>
                    <select id="campus" name="campus" required>
                        <option value=""></option>
                        <option value="Alangilan">Alangilan</option>
                        <option value="ARASOF-Nasugbu">ARASOF-Nasugbu</option>
                        <option value="Balayan">Balayan</option>
                        <option value="Central">Central</option>
                        <option value="JPLPC-Malvar">JPLPC-Malvar</option>
                        <option value="Lemery">Lemery</option>
                        <option value="Lipa">Lipa</option>
                        <option value="Lobo">Lobo</option>
                        <option value="Pablo Borbon">Pablo Borbon</option>
                        <option value="Rosario">Rosario</option>
                        <option value="San Juan">San Juan</option>
                    </select>

                    <label for="year">Year:</label>
                    <input type="number" id="year" name="year" required>

                    <label for="travellerName">Name of Traveller:</label>
                    <input type="text" id="travellerName" name="travellerName" required>

                    <label for="travelPurpose">Purpose of Travel:</label>
                    <input type="text" id="travelPurpose" name="travelPurpose" required>

                    <label for="travelDate">Travel Date:</label>
                    <input type="date" id="travelDate" name="travelDate" required>

                    <label for="origin">Origin:</label>
                    <input type="text" id="origin" name="origin" required>

                    <label for="destination">Destination:</label>
                    <input type="text" id="destination" name="destination" required>

                    <label for="class">Class:</label>
                    <select id="class" name="class" required>
                        <option value="Economy">Economy</option>
                        <option value="Business Class">Business Class</option>
                    </select>

                    <label for="onewayRoundTrip">One Way/Round Trip:</label>
                    <select id="onewayRoundTrip" name="onewayRoundTrip" required>
                        <option value="One Way">One Way</option>
                        <option value="Round Trip">Round Trip</option>
                    </select>

                    <label for="ghgEmissionKGC02e">kg CO2e:</label>
                    <input type="text" id="ghgEmissionKGC02e" name="ghgEmissionKGC02e" required>

                    <label for="ghgEmissionTC02e">t CO2e:</label>
                    <input type="text" id="ghgEmissionTC02e" name="ghgEmissionTC02e" required>

                    <button type="submit" onclick="submitFlightData()">Submit</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
    function addRow() {
        var originalRow = document.getElementById('flightForm');
        var clone = originalRow.cloneNode(true);
        document.getElementById('flightForm').appendChild(clone);
    }
    
    function removeRow(button) {
        var row = button.closest('.form-container');
        row.remove();
    }
    </script>
    
</body>
</html>
